name: ü™ùCheck for Submodule Changes

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  workflow_dispatch:

jobs:
  check_submodule_changes:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout the repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
          submodules: recursive
          token: ${{ secrets.PAT_TOKEN }}

      # Use the custom action to check submodule changes
      - name: Check for changes in submodule docs
        uses: ./actions/check-submodule-changes
        with:
          branch: 'main'

      # Output the result for downstream workflows
      - name: Set output for downstream workflows
        run: |
          echo "::set-output name=docs_modified::${{ steps.check_submodule_changes.outputs.docs_modified }}"
